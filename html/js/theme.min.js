"use strict";function shortDate(e){return e.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}function clearActiveDate(){var e=document.querySelectorAll(".card-body.active");0<e.length&&e[0].classList.remove("active")}function getLocaleDateObject(e){var t=60*(new Date).getTimezoneOffset()*1e3;return new Date(e.valueOf()+t)}document.addEventListener("DOMContentLoaded",function(){console.log("ready");var e=document.getElementById("calendar"),n=new FullCalendar.Calendar(e,{initialView:"dayGridWeek",headerToolbar:{left:"prev,next",center:"title",right:"dayGridWeek,dayGridDay"}});function t(){clearActiveDate();var e=new Date(n.currentData.dateProfile.currentRange.start),t=(console.log(getLocaleDateObject(e)),e=getLocaleDateObject(e),new XMLHttpRequest),e=e.valueOf()/1e3;t.open("POST","../update_active_week.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(document.getElementById("main").innerHTML=t.responseText)},t.send(e)}document.getElementById("next").addEventListener("click",function(){n.next(),t()}),document.getElementById("previous").addEventListener("click",function(){n.prev(),t()}),console.log(n),$("#submit").click(function(e){e.preventDefault(),$.post("../ajax.php",{plan:a},function(e){console.log(e)})});document.querySelectorAll("input[type='text']");var a=[];$("#main").on("change",'input[type="text"]',function(e){var t=$(this).parent(),t={id:t.children().eq(2).val(),d_id:t.children().eq(0).val(),recipe_name:t.children().eq(1).val()};a.push(t)})}),function(a){a(".recipe").ready(function(){a("#addIngredient").on("click",function(e){e.preventDefault();var e=a('input[name^="recipe[ingredients"]'),t=e.length,e=e.last().parent().clone(),n=(n=e.find("input").attr("name")).replace(/(\d+)/,t);e.find("input").attr({name:n,placeholder:"Ingredient "+(t+1),value:""}),a(this).before(e)}),a("#addStep").on("click",function(e){e.preventDefault();var e=a('textarea[name^="recipe[instructions"]'),t=e.length,e=e.last().parent().clone(),n=(n=e.find("textarea").attr("name")).replace(/(\d+)/,t);e.find("textarea").attr({name:n,placeholder:"Step "+(t+1)}),e.find("textarea").val(""),a(this).before(e)}),a(".recipe").on("click","span.input-group-text",function(e){var t;e.preventDefault(),1==a(this).parent().parent().children(".input-group").length?((t=a(this).parent().parent().find(".invalid-feedback")).removeAttr("style").addClass("d-block"),window.setTimeout(function(){console.log(a(this)),t.fadeOut(1e3,function(){t.removeClass("d-block")})},5e3)):1<a(this).parent().parent().children(".input-group").length&&a(this).parent().remove()})})}(jQuery);